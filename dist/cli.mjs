var Fr=Object.create;var T=Object.defineProperty,Zr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptor,Jr=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,Xr=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable;var G=(e,r,t)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,h=(e,r)=>{for(var t in r||(r={}))W.call(r,t)&&G(e,t,r[t]);if(_)for(var t of _(r))Br.call(r,t)&&G(e,t,r[t]);return e},F=(e,r)=>Zr(e,Jr(r));var Kr=(e,r)=>()=>(e&&(r=e(e=0)),r);var a=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Qr=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Yr(r))!W.call(e,o)&&o!==t&&T(e,o,{get:()=>r[o],enumerable:!(i=Hr(r,o))||i.enumerable});return e};var Z=(e,r,t)=>(t=e!=null?Fr(Xr(e)):{},Qr(r||!e||!e.__esModule?T(t,"default",{value:e,enumerable:!0}):t,e));var n=Kr(()=>{});var H=a(f=>{"use strict";n();f.__esModule=!0;f.OpenAPIV2=f.OpenAPIV3=void 0;var et;(function(e){var r;(function(t){t.GET="get",t.PUT="put",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.HEAD="head",t.PATCH="patch",t.TRACE="trace"})(r=e.HttpMethods||(e.HttpMethods={}))})(et=f.OpenAPIV3||(f.OpenAPIV3={}));var rt;(function(e){var r;(function(t){t.GET="get",t.PUT="put",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.HEAD="head",t.PATCH="patch"})(r=e.HttpMethods||(e.HttpMethods={}))})(rt=f.OpenAPIV2||(f.OpenAPIV2={}))});var X=a((Di,Y)=>{n();var it=typeof global=="object"&&global&&global.Object===Object&&global;Y.exports=it});var K=a((Mi,B)=>{n();var ot=X(),st=typeof self=="object"&&self&&self.Object===Object&&self,ut=ot||st||Function("return this")();B.exports=ut});var A=a((Ni,Q)=>{n();var at=K(),ct=at.Symbol;Q.exports=ct});var re=a((zi,ee)=>{n();function pt(e,r){for(var t=-1,i=e==null?0:e.length,o=Array(i);++t<i;)o[t]=r(e[t],t,e);return o}ee.exports=pt});var ne=a(($i,te)=>{n();var ft=Array.isArray;te.exports=ft});var ue=a((_i,se)=>{n();var ie=A(),oe=Object.prototype,lt=oe.hasOwnProperty,dt=oe.toString,m=ie?ie.toStringTag:void 0;function mt(e){var r=lt.call(e,m),t=e[m];try{e[m]=void 0;var i=!0}catch{}var o=dt.call(e);return i&&(r?e[m]=t:delete e[m]),o}se.exports=mt});var ce=a((Gi,ae)=>{n();var bt=Object.prototype,xt=bt.toString;function gt(e){return xt.call(e)}ae.exports=gt});var de=a((Wi,le)=>{n();var pe=A(),Ot=ue(),ht=ce(),At="[object Null]",vt="[object Undefined]",fe=pe?pe.toStringTag:void 0;function yt(e){return e==null?e===void 0?vt:At:fe&&fe in Object(e)?Ot(e):ht(e)}le.exports=yt});var be=a((Fi,me)=>{n();function wt(e){return e!=null&&typeof e=="object"}me.exports=wt});var ge=a((Zi,xe)=>{n();var Rt=de(),jt=be(),St="[object Symbol]";function Tt(e){return typeof e=="symbol"||jt(e)&&Rt(e)==St}xe.exports=Tt});var we=a((Hi,ye)=>{n();var Oe=A(),Pt=re(),Ct=ne(),qt=ge(),It=1/0,he=Oe?Oe.prototype:void 0,Ae=he?he.toString:void 0;function ve(e){if(typeof e=="string")return e;if(Ct(e))return Pt(e,ve)+"";if(qt(e))return Ae?Ae.call(e):"";var r=e+"";return r=="0"&&1/e==-It?"-0":r}ye.exports=ve});var b=a((Ji,Re)=>{n();var Et=we();function kt(e){return e==null?"":Et(e)}Re.exports=kt});var Se=a((Yi,je)=>{n();function Ut(e,r,t){var i=-1,o=e.length;r<0&&(r=-r>o?0:o+r),t=t>o?o:t,t<0&&(t+=o),o=r>t?0:t-r>>>0,r>>>=0;for(var p=Array(o);++i<o;)p[i]=e[i+r];return p}je.exports=Ut});var Pe=a((Xi,Te)=>{n();var Vt=Se();function Lt(e,r,t){var i=e.length;return t=t===void 0?i:t,!r&&t>=i?e:Vt(e,r,t)}Te.exports=Lt});var P=a((Bi,Ce)=>{n();var Dt="\\ud800-\\udfff",Mt="\\u0300-\\u036f",Nt="\\ufe20-\\ufe2f",zt="\\u20d0-\\u20ff",$t=Mt+Nt+zt,_t="\\ufe0e\\ufe0f",Gt="\\u200d",Wt=RegExp("["+Gt+Dt+$t+_t+"]");function Ft(e){return Wt.test(e)}Ce.exports=Ft});var Ie=a((Ki,qe)=>{n();function Zt(e){return e.split("")}qe.exports=Zt});var Ne=a((Qi,Me)=>{n();var Ee="\\ud800-\\udfff",Ht="\\u0300-\\u036f",Jt="\\ufe20-\\ufe2f",Yt="\\u20d0-\\u20ff",Xt=Ht+Jt+Yt,Bt="\\ufe0e\\ufe0f",Kt="["+Ee+"]",C="["+Xt+"]",q="\\ud83c[\\udffb-\\udfff]",Qt="(?:"+C+"|"+q+")",ke="[^"+Ee+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",en="\\u200d",Le=Qt+"?",De="["+Bt+"]?",rn="(?:"+en+"(?:"+[ke,Ue,Ve].join("|")+")"+De+Le+")*",tn=De+Le+rn,nn="(?:"+[ke+C+"?",C,Ue,Ve,Kt].join("|")+")",on=RegExp(q+"(?="+q+")|"+nn+tn,"g");function sn(e){return e.match(on)||[]}Me.exports=sn});var $e=a((eo,ze)=>{n();var un=Ie(),an=P(),cn=Ne();function pn(e){return an(e)?cn(e):un(e)}ze.exports=pn});var Ge=a((ro,_e)=>{n();var fn=Pe(),ln=P(),dn=$e(),mn=b();function bn(e){return function(r){r=mn(r);var t=ln(r)?dn(r):void 0,i=t?t[0]:r.charAt(0),o=t?fn(t,1).join(""):r.slice(1);return i[e]()+o}}_e.exports=bn});var Fe=a((to,We)=>{n();var xn=Ge(),gn=xn("toUpperCase");We.exports=gn});var He=a((no,Ze)=>{n();var On=b(),hn=Fe();function An(e){return hn(On(e).toLowerCase())}Ze.exports=An});var Ye=a((io,Je)=>{n();function vn(e,r,t,i){var o=-1,p=e==null?0:e.length;for(i&&p&&(t=e[++o]);++o<p;)t=r(t,e[o],o,e);return t}Je.exports=vn});var Be=a((oo,Xe)=>{n();function yn(e){return function(r){return e==null?void 0:e[r]}}Xe.exports=yn});var Qe=a((so,Ke)=>{n();var wn=Be(),Rn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},jn=wn(Rn);Ke.exports=jn});var rr=a((uo,er)=>{n();var Sn=Qe(),Tn=b(),Pn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cn="\\u0300-\\u036f",qn="\\ufe20-\\ufe2f",In="\\u20d0-\\u20ff",En=Cn+qn+In,kn="["+En+"]",Un=RegExp(kn,"g");function Vn(e){return e=Tn(e),e&&e.replace(Pn,Sn).replace(Un,"")}er.exports=Vn});var nr=a((ao,tr)=>{n();var Ln=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Dn(e){return e.match(Ln)||[]}tr.exports=Dn});var or=a((co,ir)=>{n();var Mn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Nn(e){return Mn.test(e)}ir.exports=Nn});var Rr=a((po,wr)=>{n();var pr="\\ud800-\\udfff",zn="\\u0300-\\u036f",$n="\\ufe20-\\ufe2f",_n="\\u20d0-\\u20ff",Gn=zn+$n+_n,fr="\\u2700-\\u27bf",lr="a-z\\xdf-\\xf6\\xf8-\\xff",Wn="\\xac\\xb1\\xd7\\xf7",Fn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zn="\\u2000-\\u206f",Hn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dr="A-Z\\xc0-\\xd6\\xd8-\\xde",Jn="\\ufe0e\\ufe0f",mr=Wn+Fn+Zn+Hn,br="['\u2019]",sr="["+mr+"]",Yn="["+Gn+"]",xr="\\d+",Xn="["+fr+"]",gr="["+lr+"]",Or="[^"+pr+mr+xr+fr+lr+dr+"]",Bn="\\ud83c[\\udffb-\\udfff]",Kn="(?:"+Yn+"|"+Bn+")",Qn="[^"+pr+"]",hr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ar="[\\ud800-\\udbff][\\udc00-\\udfff]",d="["+dr+"]",ei="\\u200d",ur="(?:"+gr+"|"+Or+")",ri="(?:"+d+"|"+Or+")",ar="(?:"+br+"(?:d|ll|m|re|s|t|ve))?",cr="(?:"+br+"(?:D|LL|M|RE|S|T|VE))?",vr=Kn+"?",yr="["+Jn+"]?",ti="(?:"+ei+"(?:"+[Qn,hr,Ar].join("|")+")"+yr+vr+")*",ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ii="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",oi=yr+vr+ti,si="(?:"+[Xn,hr,Ar].join("|")+")"+oi,ui=RegExp([d+"?"+gr+"+"+ar+"(?="+[sr,d,"$"].join("|")+")",ri+"+"+cr+"(?="+[sr,d+ur,"$"].join("|")+")",d+"?"+ur+"+"+ar,d+"+"+cr,ii,ni,xr,si].join("|"),"g");function ai(e){return e.match(ui)||[]}wr.exports=ai});var Sr=a((fo,jr)=>{n();var ci=nr(),pi=or(),fi=b(),li=Rr();function di(e,r,t){return e=fi(e),r=t?void 0:r,r===void 0?pi(e)?li(e):ci(e):e.match(r)||[]}jr.exports=di});var Pr=a((lo,Tr)=>{n();var mi=Ye(),bi=rr(),xi=Sr(),gi="['\u2019]",Oi=RegExp(gi,"g");function hi(e){return function(r){return mi(xi(bi(r).replace(Oi,"")),e,"")}}Tr.exports=hi});var qr=a((mo,Cr)=>{n();var Ai=He(),vi=Pr(),yi=vi(function(e,r,t){return r=r.toLowerCase(),e+(t?Ai(r):r)});Cr.exports=yi});n();import qi from"cac";n();var Mr=Z(H());import*as Lr from"fs";import*as Dr from"path";import ji from"oazapfts/lib/codegen/generate";n();import tt from"@apidevtools/swagger-parser";import nt from"swagger2openapi";async function J(e){let r=await tt.bundle(e);return"openapi"in r&&r.openapi.startsWith("3")?r:(await nt.convertObj(r,{})).openapi}n();var Er=Z(qr());import*as v from"prettier";import*as Ir from"path";var wi={ts:"typescript",tsx:"typescript",js:"babel",jsx:"babel","js.flow":"flow",flow:"flow",gql:"graphql",graphql:"graphql",css:"postcss",scss:"postcss",less:"postcss",stylus:"postcss",markdown:"markdown",md:"markdown",json:"json"};async function I(e,r){let t=null,i="typescript";if(e){let o=Ir.extname(e).slice(1);i=wi[o],t=await v.resolveConfig(process.cwd(),{useCache:!0,editorconfig:!0})}return v.format(r,h({parser:i},t))}var kr=e=>e.replace(/{(.+?)}/g,(r,t)=>`:${(0,Er.default)(t)}`);n();function Ur(e){return e.map(r=>`rest.${r.verb}(\`\${baseURL}${r.path}\`, (req, res, ctx) => {
        const resultArray = [${r.responseMap.map(t=>{var i;return`[ctx.status(${parseInt(t==null?void 0:t.code)}), ctx.json(${x((i=t==null?void 0:t.responses)==null?void 0:i["application/json"])})]`})}];

          return res(...resultArray[gen.next().value % resultArray.length])
        }),
`).join("  ").trimEnd()}function x(e,r){var t;if(!e)return"null";if(e.example)return JSON.stringify(e.example);if(Array.isArray(e.type))return`faker.random.arrayElement([${e.type.map(i=>x(F(h({},e),{type:i}))).join(",")}])`;if(e.enum)return`faker.random.arrayElement(${JSON.stringify(e.enum)})`;switch(e.type){case"string":return Ri(e.format,r);case"number":return"faker.datatype.number()";case"integer":return"faker.datatype.number()";case"boolean":return"faker.datatype.boolean()";case"object":return!e.properties&&typeof e.additionalProperties=="object"?`[...new Array(5).keys()].map(_ => ({ [faker.lorem.word()]: ${x(e.additionalProperties)} })).reduce((acc, next) => Object.assign(acc, next), {})`:`{
        ${Object.entries((t=e.properties)!=null?t:{}).map(([i,o])=>`${JSON.stringify(i)}: ${x(o,i)}`).join(`,
`)}
    }`;case"array":return`[...(new Array(faker.datatype.number({ max: MAX_ARRAY_LENGTH }))).keys()].map(_ => (${x(e.items)}))`;default:return"null"}}function Ri(e,r){return["date-time","date","time"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("_at"))?"faker.date.past()":e==="uuid"?"faker.random.uuid()":["idn-email","email"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("email"))?"faker.internet.email()":["hostname","idn-hostname"].includes(e!=null?e:"")?"faker.internet.domainName()":e==="ipv4"?"faker.internet.ip()":e==="ipv6"?"faker.internet.ipv6()":["uri","uri-reference","iri","iri-reference","uri-template"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("url"))?"faker.internet.url()":r!=null&&r.toLowerCase().endsWith("name")?"faker.name.findName()":"faker.lorem.slug(1)"}n();var Vr=(e,r,t)=>{var i;return`/**
* This file is AUTO GENERATED by [msw-auto-mock](https://github.com/zoubingwu/msw-auto-mock)
* Feel free to commit/edit it as you need.
*/
/* eslint-disable */
/* tslint:disable */
const { rest } = require('msw');
const { faker } = require('@faker-js/faker');

faker.seed(1);

const baseURL = '${r}';
const MAX_ARRAY_LENGTH = ${(i=t==null?void 0:t.maxArrayLength)!=null?i:20};

const gen = (function *() {
  let i = 0;
  while (true) {
    if (i === Number.MAX_SAFE_INTEGER - 1) {
      i = 0;
    }
    yield i;
  }
})();

exports.handlers = [
  ${e}
];

`};async function Nr(e,r){var U,V,L,D;let{output:t}=r,i,o=await J(e),p=new ji(o,{}),$r=Pi(o),E=(V=(U=r==null?void 0:r.includes)==null?void 0:U.split(","))!=null?V:null,k=(D=(L=r==null?void 0:r.excludes)==null?void 0:L.split(","))!=null?D:null,_r=$r.filter(l=>!(E&&!E.includes(l.path)||k&&k.includes(l.path))).map(l=>{let{verb:c,path:O,responses:R}=l,j=Object.entries(R).map(([M,Gr])=>{let S=p.resolve(Gr).content;if(!S)return{code:M};let Wr=Object.keys(S).reduce((N,z)=>{let $=S[z].schema;return typeof $<"u"&&(N[z]=g($)),N},{});return{code:M,responses:Wr}});return{verb:c,path:kr(O),responseMap:j}}),w="";r.baseUrl===!0?w=Si(o):typeof r.baseUrl=="string"&&(w=r.baseUrl),i=Vr(Ur(_r),w,r),t?Lr.writeFileSync(Dr.resolve(process.cwd(),t),await I(t,i)):console.log(await I(null,i));function g(l){let c=p.resolve(l);return c.type==="array"?(c.items=p.resolve(c.items),c.items=g(c.items)):c.type==="object"&&(!c.properties&&typeof c.additionalProperties=="object"&&"$ref"in c.additionalProperties&&(c.additionalProperties=g(p.resolve(c.additionalProperties))),c.properties&&(c.properties=Object.entries(c.properties).reduce((O,[R,j])=>(O[R]=g(j),O),{}))),c}}function Si(e){var i;let r=(i=e.servers)==null?void 0:i.at(0),t="";return r&&(t=r.url),r!=null&&r.variables&&Object.entries(r.variables).forEach(([o,p])=>{t=t.replace(`{${o}}`,p.default)}),t}var Ti=Object.values(Mr.OpenAPIV3.HttpMethods);function Pi(e){return Object.entries(e.paths).flatMap(([r,t])=>t?Object.entries(t).filter(i=>Ti.includes(i[0])).map(([i,o])=>({path:r,verb:i,responses:o.responses})):[])}var zr="0.6.0";var y=qi();y.command("<spec>","Generating msw mock definitions with random fake data.").option("-o, --output <file>","Output file path such as `./mock.js`, without it'll output to stdout.").option("-m, --max-array-length <number>","Max array length, default to 20.").option("-t, --includes <keywords>","Include the request path with given string, can be seperated with comma.").option("-e, --excludes <keywords>","Exclude the request path with given string, can be seperated with comma.").option("--base-url [baseUrl]","Use the one you specified or server url in OpenAPI description as base url.").example("msw-auto-mock ./githubapi.yaml -o mock.js").example("msw-auto-mock ./githubapi.yaml -o mock.js -t /admin,/repo -m 30").action(async(e,r)=>{await Nr(e,r).catch(console.error)});y.help();y.version(zr);y.parse();
