var Jr=Object.create;var T=Object.defineProperty,Yr=Object.defineProperties,Xr=Object.getOwnPropertyDescriptor,Br=Object.getOwnPropertyDescriptors,Kr=Object.getOwnPropertyNames,$=Object.getOwnPropertySymbols,Qr=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var G=(e,r,t)=>r in e?T(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,h=(e,r)=>{for(var t in r||(r={}))_.call(r,t)&&G(e,t,r[t]);if($)for(var t of $(r))et.call(r,t)&&G(e,t,r[t]);return e},F=(e,r)=>Yr(e,Br(r));var rt=(e,r)=>()=>(e&&(r=e(e=0)),r);var u=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var tt=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Kr(r))!_.call(e,o)&&o!==t&&T(e,o,{get:()=>r[o],enumerable:!(i=Xr(r,o))||i.enumerable});return e};var p=(e,r,t)=>(t=e!=null?Jr(Qr(e)):{},tt(r||!e||!e.__esModule?T(t,"default",{value:e,enumerable:!0}):t,e));var n=rt(()=>{});var Z=u(f=>{"use strict";n();f.__esModule=!0;f.OpenAPIV2=f.OpenAPIV3=void 0;var nt;(function(e){var r;(function(t){t.GET="get",t.PUT="put",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.HEAD="head",t.PATCH="patch",t.TRACE="trace"})(r=e.HttpMethods||(e.HttpMethods={}))})(nt=f.OpenAPIV3||(f.OpenAPIV3={}));var it;(function(e){var r;(function(t){t.GET="get",t.PUT="put",t.POST="post",t.DELETE="delete",t.OPTIONS="options",t.HEAD="head",t.PATCH="patch"})(r=e.HttpMethods||(e.HttpMethods={}))})(it=f.OpenAPIV2||(f.OpenAPIV2={}))});var B=u((Ui,X)=>{n();var ot=typeof global=="object"&&global&&global.Object===Object&&global;X.exports=ot});var Q=u((Vi,K)=>{n();var st=B(),ut=typeof self=="object"&&self&&self.Object===Object&&self,at=st||ut||Function("return this")();K.exports=at});var A=u((Li,ee)=>{n();var ct=Q(),pt=ct.Symbol;ee.exports=pt});var te=u((Mi,re)=>{n();function ft(e,r){for(var t=-1,i=e==null?0:e.length,o=Array(i);++t<i;)o[t]=r(e[t],t,e);return o}re.exports=ft});var ie=u((Di,ne)=>{n();var lt=Array.isArray;ne.exports=lt});var ae=u((Ni,ue)=>{n();var oe=A(),se=Object.prototype,dt=se.hasOwnProperty,mt=se.toString,m=oe?oe.toStringTag:void 0;function bt(e){var r=dt.call(e,m),t=e[m];try{e[m]=void 0;var i=!0}catch{}var o=mt.call(e);return i&&(r?e[m]=t:delete e[m]),o}ue.exports=bt});var pe=u((Wi,ce)=>{n();var gt=Object.prototype,xt=gt.toString;function Ot(e){return xt.call(e)}ce.exports=Ot});var me=u((zi,de)=>{n();var fe=A(),ht=ae(),At=pe(),vt="[object Null]",yt="[object Undefined]",le=fe?fe.toStringTag:void 0;function wt(e){return e==null?e===void 0?yt:vt:le&&le in Object(e)?ht(e):At(e)}de.exports=wt});var ge=u(($i,be)=>{n();function Rt(e){return e!=null&&typeof e=="object"}be.exports=Rt});var Oe=u((Gi,xe)=>{n();var jt=me(),St=ge(),Tt="[object Symbol]";function Ct(e){return typeof e=="symbol"||St(e)&&jt(e)==Tt}xe.exports=Ct});var Re=u((_i,we)=>{n();var he=A(),Pt=te(),kt=ie(),It=Oe(),qt=1/0,Ae=he?he.prototype:void 0,ve=Ae?Ae.toString:void 0;function ye(e){if(typeof e=="string")return e;if(kt(e))return Pt(e,ye)+"";if(It(e))return ve?ve.call(e):"";var r=e+"";return r=="0"&&1/e==-qt?"-0":r}we.exports=ye});var b=u((Fi,je)=>{n();var Et=Re();function Ut(e){return e==null?"":Et(e)}je.exports=Ut});var Te=u((Zi,Se)=>{n();function Vt(e,r,t){var i=-1,o=e.length;r<0&&(r=-r>o?0:o+r),t=t>o?o:t,t<0&&(t+=o),o=r>t?0:t-r>>>0,r>>>=0;for(var c=Array(o);++i<o;)c[i]=e[i+r];return c}Se.exports=Vt});var Pe=u((Hi,Ce)=>{n();var Lt=Te();function Mt(e,r,t){var i=e.length;return t=t===void 0?i:t,!r&&t>=i?e:Lt(e,r,t)}Ce.exports=Mt});var C=u((Ji,ke)=>{n();var Dt="\\ud800-\\udfff",Nt="\\u0300-\\u036f",Wt="\\ufe20-\\ufe2f",zt="\\u20d0-\\u20ff",$t=Nt+Wt+zt,Gt="\\ufe0e\\ufe0f",_t="\\u200d",Ft=RegExp("["+_t+Dt+$t+Gt+"]");function Zt(e){return Ft.test(e)}ke.exports=Zt});var qe=u((Yi,Ie)=>{n();function Ht(e){return e.split("")}Ie.exports=Ht});var We=u((Xi,Ne)=>{n();var Ee="\\ud800-\\udfff",Jt="\\u0300-\\u036f",Yt="\\ufe20-\\ufe2f",Xt="\\u20d0-\\u20ff",Bt=Jt+Yt+Xt,Kt="\\ufe0e\\ufe0f",Qt="["+Ee+"]",P="["+Bt+"]",k="\\ud83c[\\udffb-\\udfff]",en="(?:"+P+"|"+k+")",Ue="[^"+Ee+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",rn="\\u200d",Me=en+"?",De="["+Kt+"]?",tn="(?:"+rn+"(?:"+[Ue,Ve,Le].join("|")+")"+De+Me+")*",nn=De+Me+tn,on="(?:"+[Ue+P+"?",P,Ve,Le,Qt].join("|")+")",sn=RegExp(k+"(?="+k+")|"+on+nn,"g");function un(e){return e.match(sn)||[]}Ne.exports=un});var $e=u((Bi,ze)=>{n();var an=qe(),cn=C(),pn=We();function fn(e){return cn(e)?pn(e):an(e)}ze.exports=fn});var _e=u((Ki,Ge)=>{n();var ln=Pe(),dn=C(),mn=$e(),bn=b();function gn(e){return function(r){r=bn(r);var t=dn(r)?mn(r):void 0,i=t?t[0]:r.charAt(0),o=t?ln(t,1).join(""):r.slice(1);return i[e]()+o}}Ge.exports=gn});var Ze=u((Qi,Fe)=>{n();var xn=_e(),On=xn("toUpperCase");Fe.exports=On});var Je=u((eo,He)=>{n();var hn=b(),An=Ze();function vn(e){return An(hn(e).toLowerCase())}He.exports=vn});var Xe=u((ro,Ye)=>{n();function yn(e,r,t,i){var o=-1,c=e==null?0:e.length;for(i&&c&&(t=e[++o]);++o<c;)t=r(t,e[o],o,e);return t}Ye.exports=yn});var Ke=u((to,Be)=>{n();function wn(e){return function(r){return e==null?void 0:e[r]}}Be.exports=wn});var er=u((no,Qe)=>{n();var Rn=Ke(),jn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Sn=Rn(jn);Qe.exports=Sn});var tr=u((io,rr)=>{n();var Tn=er(),Cn=b(),Pn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kn="\\u0300-\\u036f",In="\\ufe20-\\ufe2f",qn="\\u20d0-\\u20ff",En=kn+In+qn,Un="["+En+"]",Vn=RegExp(Un,"g");function Ln(e){return e=Cn(e),e&&e.replace(Pn,Tn).replace(Vn,"")}rr.exports=Ln});var ir=u((oo,nr)=>{n();var Mn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Dn(e){return e.match(Mn)||[]}nr.exports=Dn});var sr=u((so,or)=>{n();var Nn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Wn(e){return Nn.test(e)}or.exports=Wn});var jr=u((uo,Rr)=>{n();var fr="\\ud800-\\udfff",zn="\\u0300-\\u036f",$n="\\ufe20-\\ufe2f",Gn="\\u20d0-\\u20ff",_n=zn+$n+Gn,lr="\\u2700-\\u27bf",dr="a-z\\xdf-\\xf6\\xf8-\\xff",Fn="\\xac\\xb1\\xd7\\xf7",Zn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hn="\\u2000-\\u206f",Jn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Yn="\\ufe0e\\ufe0f",br=Fn+Zn+Hn+Jn,gr="['\u2019]",ur="["+br+"]",Xn="["+_n+"]",xr="\\d+",Bn="["+lr+"]",Or="["+dr+"]",hr="[^"+fr+br+xr+lr+dr+mr+"]",Kn="\\ud83c[\\udffb-\\udfff]",Qn="(?:"+Xn+"|"+Kn+")",ei="[^"+fr+"]",Ar="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",d="["+mr+"]",ri="\\u200d",ar="(?:"+Or+"|"+hr+")",ti="(?:"+d+"|"+hr+")",cr="(?:"+gr+"(?:d|ll|m|re|s|t|ve))?",pr="(?:"+gr+"(?:D|LL|M|RE|S|T|VE))?",yr=Qn+"?",wr="["+Yn+"]?",ni="(?:"+ri+"(?:"+[ei,Ar,vr].join("|")+")"+wr+yr+")*",ii="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",si=wr+yr+ni,ui="(?:"+[Bn,Ar,vr].join("|")+")"+si,ai=RegExp([d+"?"+Or+"+"+cr+"(?="+[ur,d,"$"].join("|")+")",ti+"+"+pr+"(?="+[ur,d+ar,"$"].join("|")+")",d+"?"+ar+"+"+cr,d+"+"+pr,oi,ii,xr,ui].join("|"),"g");function ci(e){return e.match(ai)||[]}Rr.exports=ci});var Tr=u((ao,Sr)=>{n();var pi=ir(),fi=sr(),li=b(),di=jr();function mi(e,r,t){return e=li(e),r=t?void 0:r,r===void 0?fi(e)?di(e):pi(e):e.match(r)||[]}Sr.exports=mi});var Pr=u((co,Cr)=>{n();var bi=Xe(),gi=tr(),xi=Tr(),Oi="['\u2019]",hi=RegExp(Oi,"g");function Ai(e){return function(r){return bi(xi(gi(r).replace(hi,"")),e,"")}}Cr.exports=Ai});var Ir=u((po,kr)=>{n();var vi=Je(),yi=Pr(),wi=yi(function(e,r,t){return r=r.toLowerCase(),e+(t?vi(r):r)});kr.exports=wi});n();var Gr=p(require("cac"));n();var Mr=p(require("fs")),Dr=p(require("path")),Nr=p(require("oazapfts/lib/codegen/generate")),Wr=p(Z());n();var H=p(require("@apidevtools/swagger-parser")),J=p(require("swagger2openapi"));async function Y(e){let r=await H.default.bundle(e);return"openapi"in r&&r.openapi.startsWith("3")?r:(await J.default.convertObj(r,{})).openapi}n();var v=p(require("prettier")),qr=p(require("path")),Er=p(Ir()),Ri={ts:"typescript",tsx:"typescript",js:"babel",jsx:"babel","js.flow":"flow",flow:"flow",gql:"graphql",graphql:"graphql",css:"postcss",scss:"postcss",less:"postcss",stylus:"postcss",markdown:"markdown",md:"markdown",json:"json"};async function I(e,r){let t=null,i="typescript";if(e){let o=qr.extname(e).slice(1);i=Ri[o],t=await v.resolveConfig(process.cwd(),{useCache:!0,editorconfig:!0})}return v.format(r,h({parser:i},t))}var Ur=e=>e.replace(/{(.+?)}/g,(r,t)=>`:${(0,Er.default)(t)}`);n();function Vr(e){return e.map(r=>`rest.${r.verb}(\`\${baseURL}${r.path}\`, (req, res, ctx) => {
        const resultArray = [${r.responseMap.map(t=>{var i;return`[ctx.status(${parseInt(t==null?void 0:t.code)}), ctx.json(${g((i=t==null?void 0:t.responses)==null?void 0:i["application/json"])})]`})}];

          return res(...resultArray[gen.next().value % resultArray.length])
        }),
`).join("  ").trimEnd()}function g(e,r){var t;if(!e)return"null";if(e.example)return JSON.stringify(e.example);if(Array.isArray(e.type))return`faker.random.arrayElement([${e.type.map(i=>g(F(h({},e),{type:i}))).join(",")}])`;if(e.enum)return`faker.random.arrayElement(${JSON.stringify(e.enum)})`;switch(e.type){case"string":return ji(e.format,r);case"number":return"faker.datatype.number()";case"integer":return"faker.datatype.number()";case"boolean":return"faker.datatype.boolean()";case"object":return!e.properties&&typeof e.additionalProperties=="object"?`[...new Array(5).keys()].map(_ => ({ [faker.lorem.word()]: ${g(e.additionalProperties)} })).reduce((acc, next) => Object.assign(acc, next), {})`:`{
        ${Object.entries((t=e.properties)!=null?t:{}).map(([i,o])=>`${JSON.stringify(i)}: ${g(o,i)}`).join(`,
`)}
    }`;case"array":return`[...(new Array(faker.datatype.number({ max: MAX_ARRAY_LENGTH }))).keys()].map(_ => (${g(e.items)}))`;default:return"null"}}function ji(e,r){return["date-time","date","time"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("_at"))?"faker.date.past()":e==="uuid"?"faker.random.uuid()":["idn-email","email"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("email"))?"faker.internet.email()":["hostname","idn-hostname"].includes(e!=null?e:"")?"faker.internet.domainName()":e==="ipv4"?"faker.internet.ip()":e==="ipv6"?"faker.internet.ipv6()":["uri","uri-reference","iri","iri-reference","uri-template"].includes(e!=null?e:"")||(r==null?void 0:r.toLowerCase().endsWith("url"))?"faker.internet.url()":r!=null&&r.toLowerCase().endsWith("name")?"faker.name.findName()":"faker.lorem.slug(1)"}n();var Lr=(e,r,t)=>{var i;return`/**
* This file is AUTO GENERATED by [msw-auto-mock](https://github.com/zoubingwu/msw-auto-mock)
* Feel free to commit/edit it as you need.
*/
/* eslint-disable */
/* tslint:disable */
import { setupWorker, rest } from 'msw';
import faker from '@faker-js/faker';

faker.seed(1);

const baseURL = '${r}';
const MAX_ARRAY_LENGTH = ${(i=t==null?void 0:t.maxArrayLength)!=null?i:20};

const gen = (function *() {
  let i = 0;
  while (true) {
    if (i === Number.MAX_SAFE_INTEGER - 1) {
      i = 0;
    }
    yield i++;
  }
})();

export const handlers = [
  ${e}
];

// This configures a Service Worker with the given request handlers.
export const startWorker = () => {
  const worker = setupWorker(...handlers);
  worker.start();
}
`};async function zr(e,r){var U,V,L,M;let{output:t}=r,i,o=await Y(e),c=new Nr.default(o,{}),_r=Ci(o),q=(V=(U=r==null?void 0:r.includes)==null?void 0:U.split(","))!=null?V:null,E=(M=(L=r==null?void 0:r.excludes)==null?void 0:L.split(","))!=null?M:null,Fr=_r.filter(l=>!(q&&!q.includes(l.path)||E&&E.includes(l.path))).map(l=>{let{verb:a,path:O,responses:R}=l,j=Object.entries(R).map(([D,Zr])=>{let S=c.resolve(Zr).content;if(!S)return{code:D};let Hr=Object.keys(S).reduce((N,W)=>{let z=S[W].schema;return typeof z<"u"&&(N[W]=x(z)),N},{});return{code:D,responses:Hr}});return{verb:a,path:Ur(O),responseMap:j}}),w="";r.baseUrl===!0?w=Si(o):typeof r.baseUrl=="string"&&(w=r.baseUrl),i=Lr(Vr(Fr),w,r),t?Mr.writeFileSync(Dr.resolve(process.cwd(),t),await I(t,i)):console.log(await I(null,i));function x(l){let a=c.resolve(l);return a.type==="array"?(a.items=c.resolve(a.items),a.items=x(a.items)):a.type==="object"&&(!a.properties&&typeof a.additionalProperties=="object"&&"$ref"in a.additionalProperties&&(a.additionalProperties=x(c.resolve(a.additionalProperties))),a.properties&&(a.properties=Object.entries(a.properties).reduce((O,[R,j])=>(O[R]=x(j),O),{}))),a}}function Si(e){var i;let r=(i=e.servers)==null?void 0:i.at(0),t="";return r&&(t=r.url),r!=null&&r.variables&&Object.entries(r.variables).forEach(([o,c])=>{t=t.replace(`{${o}}`,c.default)}),t}var Ti=Object.values(Wr.OpenAPIV3.HttpMethods);function Ci(e){return Object.entries(e.paths).flatMap(([r,t])=>t?Object.entries(t).filter(i=>Ti.includes(i[0])).map(([i,o])=>({path:r,verb:i,responses:o.responses})):[])}var $r="0.6.0";var y=(0,Gr.default)();y.command("<spec>","Generating msw mock definitions with random fake data.").option("-o, --output <file>","Output file path such as `./mock.js`, without it'll output to stdout.").option("-m, --max-array-length <number>","Max array length, default to 20.").option("-t, --includes <keywords>","Include the request path with given string, can be seperated with comma.").option("-e, --excludes <keywords>","Exclude the request path with given string, can be seperated with comma.").option("--base-url [baseUrl]","Use the one you specified or server url in OpenAPI description as base url.").example("msw-auto-mock ./githubapi.yaml -o mock.js").example("msw-auto-mock ./githubapi.yaml -o mock.js -t /admin,/repo -m 30").action(async(e,r)=>{await zr(e,r).catch(console.error)});y.help();y.version($r);y.parse();
